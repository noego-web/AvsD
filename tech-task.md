# **ТЕХНИЧЕСКОЕ ЗАДАНИЕ (ТЗ): Angels vs Demons (Single Player Campaign)**

## **1\. Паспорт Проекта**

* **Название:** Angels vs Demons .  
* **Жанр:** Twin-Stick Shooter / Tower Defense / Arcade.  
* **Платформа:** Android / iOS (через Web-технологии).  
* **Режим:** Оффлайн (Single Player) .  
* **Графический стиль:** 2D Pixel Art (средняя детализация), вид сверху (Top-Down) .  
* **Сеттинг:** Заброшенный темный храм .

  ## **2\. Технический Стек (Для AI IDE)**

* **Язык:** TypeScript.  
* **Движок:** **Phaser 3** (идеален для 2D, физики и частиц).  
* **Сборщик:** Vite (быстрый старт, горячая перезагрузка).  
* **Физика:** Arcade Physics (встроенная в Phaser, оптимизирована для мобильных).  
* **Плагины:**  
  * phaser3-rex-plugins: для "Virtual Joystick" (виртуальные стики) и UI.  
* **Сборка в мобайл:** Capacitor (обертка JS кода в APK).  
* **Хранение данных:** localStorage (веб) \+ Capacitor Storage (на устройстве) для сохранений прогресса.

  ## **3\. Геймплей и Основные Механики (Core Loop)**

  ### **3.1. Цель и Условия**

* **Задача:** Игрок (Ангел) защищает Колонны (Истоки жизни) от волн демонов .  
* **Условие Победы:** Продержаться заданное время (таймер волны), сохранив **минимум 2 колонны** целыми (из 2, 4 или 6 стартовых) .  
* **Условие Поражения:** Осталось менее 2 целых колонн ИЛИ Смерть Ангела (если нет возрождения) .

  ### **3.2. Управление**

* **Два динамических джойстика** :  
  * Появляются в любом месте экрана при касании.  
  * Левая половина экрана: Перемещение.  
  * Правая половина экрана: Направление атаки (поворот персонажа) и активация луча.

    ### **3.3. Боевая система**

* **Атака Ангела:**  
  * Световой луч (сектор \~100 градусов) .  
  * Наносит периодический урон всем врагам в зоне (Tick Damage).  
  * **Механика Перегрева:** При стрельбе заполняется шкала "Heat". При 100% оружие блокируется на 2 секунды.  
* **Атака Демонов:**  
  * Ближний бой (кулаки) или дальний бой (снаряды) .  
  * Периодичность ударов: \~0.5 сек .

    ### **3.4. Игровое поле**

* **Размер карты:** 2-4 ширины экрана устройства .  
* **Камера:** Следит за игроком, но ограничена границами карты (Camera Bounds).  
* **Индикаторы (HUD):** Стрелки по краям экрана, указывающие на врагов или атакуемые колонны вне зоны видимости.

  ## **4\. Структура Кампании (Level Design)**

Всего **30 уровней** .

### **4.1. Прогрессия сложности**

* **Уровни 1-10 (Храм 1 \- Серый камень):**  
  * Враги: Только Черти и Танки.  
  * Колонн: 2\.  
  * Карта: Небольшая.  
* **Уровни 11-20 (Храм 2 \- Темные катакомбы):**  
  * Новые враги: Камикадзе, Стрелки.  
  * Колонн: 4\.  
  * Карта: Средняя, появляются препятствия (стены).  
* **Уровни 21-30 (Храм 3 \- Проклятый алтарь):**  
  * Новые враги: Хилеры \+ Все виды.  
  * Колонн: 6\.  
  * Карта: Большая, сложная навигация.

    ### **4.2. Генерация волн**

Каждый уровень задается конфигом (JSON):

* levelDuration: время уровня в секундах.  
* spawnRate: как часто появляются враги (ускоряется к концу уровня).  
* enemyPool: какие типы врагов доступны на этом уровне .

  ## **5\. Персонажи и Враги (Entities)**

  ### **5.1. Ангел (Игрок)**

* **Визуал:** Белые одежды, эффект свечения (Bloom).  
* **Кастомизация:** Смена цвета свечения/одежды (Белый, Голубой, Розовый и т.д.) через меню .

  ### **5.2. Бестиарий (Враги)**

Все враги используют Pathfinding (поиск пути) для обхода стен.

| Тип | Цвет подсветки | Поведение (AI) | Особенности |
| :---- | :---- | :---- | :---- |
| **Черт** | Красный | Атакует того, кто ближе (Ангел или Колонна) | Базовый юнит, берет числом. |
| **Танк** | Зеленый | Игнорирует Ангела, идет ломать Колонны | Медленный, много HP, высокий урон по зданиям. |
| **Стрелок** | Фиолетовый | Держит дистанцию, стреляет в Ангела | Заставляет игрока маневрировать. |
| **Камикадзе** | Оранжевый | Бежит на Ангела | Взрывается при смерти. |
| **Хилер** | Синий | Избегает боя, лечит других | Приоритетная цель. |

## **6\. Бонусы (Power-ups)**

Появляются на карте случайно . Действуют 10-15 секунд.

1. **Double Damage:** Луч становится шире и ярче, урон x2.  
2. **Infinite Coolant:** Отсутствие перегрева луча.  
3. **Repair Kit:** Восстанавливает 20% HP всем колоннам (мгновенно).  
4. **Speed Boost:** Скорость передвижения Ангела x1.5.
5. **Attract:** Притягивает всех врагов к Ангелу.

   ## **7\. UI/UX и Звук**

   ### **7.1. Интерфейс (\!важно \- у всех значимых визуальных объектов, как колонны, ангел и демоны, должен быть тонкий внешний контур для лучшей видимости)**

* **Главное меню:**  
  * Название игры .  
  * Кнопки (каменный стиль): "Играть" (Продолжить), "Уровни", "Настройки" .  
  * Модель Ангела слева (клик открывает Кастомизацию) .  
* **В игре:**  
  * Пауза (верхний левый угол).  
  * Шкала здоровья колонн (верхний правый угол).  
  * Таймер уровня (верх центр экрана).

    ### **7.2. Аудио (аудио генерировать не нужно, просто создай папку и я сам вставлю аудио, которое будет циклично играть)**

* **Музыка:** Медленная, атмосферная. Loop 3-5 минут \-\> пауза 20 сек.  
  * Трек меню.  
  * 3 разных трека для разных "биомов" (каждые 10 уровней).  
* **SFX:** Удары, разрушение колонн, стрельба луча, подбор бонусов.

  ## **8\. Монетизация и Экономика**

* **Валюта:** Монеты (получение за победу в уровне).  
* **Траты:** Косметика (скины/цвета ангела и колонн), улучшение колонн (добавить им изначальное здоровье) и временные бусты перед уровнем (опционально \- можно выбрать только один буст).  
* **Реклама (Rewarded Video):**  
  * Возрождение (1 раз за бой).  
  * Удвоение монет после победы.  
  * Какие-либо кастомные скины на ангела или колонну  
* **Прямые покупки:**  
  * Отключение рекламы   
  * Скины  
    